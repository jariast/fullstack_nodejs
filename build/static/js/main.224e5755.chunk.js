(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(14),r=t.n(o),u=(t(20),t(4)),l=t(2),i=(t(21),function(e){var n=e.person,t=e.clickHandler;return c.a.createElement("div",{className:"personDetails"},c.a.createElement("p",null,"".concat(n.name," /// ").concat(n.number)),c.a.createElement("button",{onClick:t},"Delete Person"))}),s=function(e){var n=e.label,t=e.inputValue,a=e.onChangeHandler;return c.a.createElement("label",null,n,c.a.createElement("input",{required:!0,value:t,onChange:a}))},f=function(e){var n=e.label,t=e.inputValue,a=e.onChangeHandler;return c.a.createElement("label",null,n,c.a.createElement("input",{value:t,onChange:a}))},m=function(e){var n=e.notification,t=n.isError?"error":"success";return n.message?c.a.createElement("div",{className:t},n.message):null},d=t(3),b=t.n(d),p="http://localhost:3001/api/persons",h=function(){return b.a.get(p).then((function(e){return console.log("Response after getAll: ",e),e.data}))},E=function(e){return b.a.post(p,e).then((function(e){return console.log("Response after create: ",e),e.data}))},v=function(e,n){return b.a.put("".concat(p,"/").concat(e),n).then((function(e){return console.log("Response after update: ",e),e.data}))},g=function(e){return b.a.delete("".concat(p,"/").concat(e)).then((function(e){return console.log("Response after delete: ",e),e.data}))},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),d=Object(l.a)(r,2),b=d[0],p=d[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),k=O[0],w=O[1],C=Object(a.useState)(""),S=Object(l.a)(C,2),y=S[0],H=S[1],D=Object(a.useState)({}),V=Object(l.a)(D,2),x=V[0],R=V[1],N=Object(a.useState)(t),A=Object(l.a)(N,2),J=A[0],P=A[1];Object(a.useEffect)((function(){h().then((function(e){o(e),P(e)}))}),[]);var q=function(){E({name:b,number:k}).then((function(e){var n=t.concat(e);I(!1,'"'.concat(e.name,'" has been created')),F(n)}))},B=function(e){var n=t.find((function(n){return n.name===e})),a=Object(u.a)(Object(u.a)({},n),{},{number:k});v(n.id,a).then((function(e){var a=t.map((function(t){return t.id!==n.id?t:e}));I(!1,'"'.concat(e.name,'" number has been updated.')),F(a)})).catch((function(e){I(!0,"".concat(n.name," no longer exists in the server."))}))},F=function(e){o(e),P(e),p(""),w(""),H("")},I=function(e,n){R({isError:e,message:n}),setTimeout((function(){R({})}),2e3)};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(m,{notification:x}),c.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),t.some((function(e){return e.name===b})))?window.confirm('"'.concat(b,'" already exists, do you want to update the phone number?'))&&B(b):q()}},c.a.createElement("div",null,c.a.createElement(s,{label:"name",inputValue:b,onChangeHandler:function(e){p(e.target.value)}}),c.a.createElement(s,{label:"number",inputValue:k,onChangeHandler:function(e){w(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement(f,{label:"Filter",inputValue:y,onChangeHandler:function(e){var n=e.target.value;H(n),P(t.filter((function(e){return e.name.toLowerCase().includes(n)})))}}),J.map((function(e){return c.a.createElement(i,{key:e.id,person:e,clickHandler:function(){return function(e){console.log("Deleting person :",e),window.confirm('Do you really want to delete "'.concat(e.name,'" info?'))&&g(e.id).then((function(){var n=t.filter((function(n){return n.id!==e.id}));o(n),P(n),I(!1,'"'.concat(e.name,'" has been deleted'))})).catch((function(n){I(!0,"".concat(e.name," no longer exists in the server."))}))}(e)}})})))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.224e5755.chunk.js.map